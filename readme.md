# Intelligent Video Gallery

A modern, self-hosted video gallery application featuring AI-powered tagging, timeline views, and advanced video management. Built with SvelteKit and Node.js.

![Gallery View](frontend/static/favicon.png)

## ğŸš€ Features

### Core Experience
*   **Infinite Scroll Gallery**: Seamlessly browse thousands of videos with high performance.
*   **Timeline View**: Browse videos chronologically with a "Google Photos" style layout, grouped by date.
*   **Smart Video Player**: Floating, draggable, and resizable video player that persists navigation.
*   **Rich Previews**: 
    *   Auto-generated thumbnails.
    *   Sprite-sheet based animated hover previews.

### ğŸ§  AI & Automation
*   **Auto-Tagging**: Integrates with [Ollama](https://ollama.com/) to automatically analyze video filenames and generate descriptive tags using local LLMs (Llama 3, Mistral, etc.).
*   **Auto-Thumbnails**: background generation of optimized thumbnails and animated previews using FFmpeg.

### ğŸ·ï¸ Organization & Management
*   **Advanced Tagging**:
    *   Manual tag addition/removal.
    *   **Tag Manager**: centralized UI to rename, delete, or merge tags globally.
    *   **Blacklist**: Prevent specific unwanted tags from being generated by the AI.
*   **Video Management**: Rename or delete videos directly from the UI.
*   **Search & Filters**:
    *   Full-text search.
    *   Filter by Date Range (Quick jump presets, Month/Year buckets).
    *   Filter by Tags.
    *   Sort by Name, Date, Likes, or **Random**.

## ğŸ› ï¸ Tech Stack

*   **Frontend**: SvelteKit, TailwindCSS, Lucide Icons.
*   **Backend**: Node.js, Express, Socket.IO (for real-time progress updates).
*   **Data Persistence**: JSON-based local storage (no heavy database required for personal use).
*   **Media Processing**: `ffmpeg-static`, `fluent-ffmpeg`.

## âš™ï¸ Prerequisites

1.  **Node.js**: v18+ recommended.
2.  **FFmpeg**: Required on the system path or handled via `ffmpeg-static`.
3.  **Ollama**: (Optional) For AI auto-tagging features. Install from [ollama.com](https://ollama.com/) and pull a model (e.g., `ollama pull llama3`).

## ğŸ“¦ Installation & Setup

### 1. Backend

Navigate to the `backend` directory:
```bash
cd backend
npm install
```

Create a `.env` file in `backend/` (optional, defaults provided in code):
```env
PORT=5000
ASSETS_PATH=../../assets
DATA_PATH=../data
```

### 2. Frontend

Navigate to the `frontend` directory:
```bash
cd frontend
npm install
```

## ğŸš€ Running the Project

You need to run both the backend and frontend servers.

**Terminal 1 (Backend):**
```bash
cd backend
npm run dev
# Server runs on http://localhost:5000
```

**Terminal 2 (Frontend):**
```bash
cd frontend
npm run dev
# Client runs on http://localhost:5173
```

## ğŸ“œ Scripts (Backend)

The backend includes utility scripts for bulk processing:

*   **Generate Thumbnails**: process all videos without thumbnails.
    ```bash
    npm run script:thumb
    ```
*   **Auto-Tag Videos**: process untagged videos using the active LLM.
    ```bash
    npm run script:tag
    ```

## ğŸ“‚ Project Structure

```
â”œâ”€â”€ assets/             # Storage for images/videos (shared)
â”œâ”€â”€ backend/            # Express Server
â”‚   â”œâ”€â”€ data/           # JSON data store (videos.json, blacklist.json)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ services/   # Business logic (ffmpeg, ollama)
â”‚   â”‚   â””â”€â”€ routes/     # API Endpoints
â”œâ”€â”€ frontend/           # SvelteKit App
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/ # Reusable UI components
â”‚   â”‚   â”œâ”€â”€ routes/     # Pages (Gallery, Timeline, Tags)
â”‚   â”‚   â””â”€â”€ stores/     # State management
```

## ğŸ¤ Contributing

Feel free to open issues or submit PRs for improvements!
